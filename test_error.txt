============================= test session starts ==============================
platform linux -- Python 3.13.2, pytest-9.0.2, pluggy-1.6.0 -- /media/haylerd/External/dspy-compounding-engineering/.venv/bin/python
cachedir: .pytest_cache
rootdir: /media/haylerd/External/dspy-compounding-engineering
configfile: pytest.ini
plugins: cov-7.0.0, asyncio-1.3.0, anyio-4.12.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 5 items

tests/test_documentation_fetcher.py::test_fetch_locally_success FAILED   [ 20%]
tests/test_documentation_fetcher.py::test_fetch_locally_failure FAILED   [ 40%]
tests/test_documentation_fetcher.py::test_fetch_via_jina_success PASSED  [ 60%]
tests/test_documentation_fetcher.py::test_jina_failure_fallback_to_local FAILED [ 80%]
tests/test_documentation_fetcher.py::test_fetch_via_playwright_success PASSED [100%]

=================================== FAILURES ===================================
__________________________ test_fetch_locally_success __________________________
tests/test_documentation_fetcher.py:30: in test_fetch_locally_success
    assert "# Title" in result
E   AssertionError: assert '# Title' in 'Example Domain\n\n# Example Domain\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)'
----------------------------- Captured stdout call -----------------------------
✓ Successfully fetched documentation via Playwright for https://example.com/docs
__________________________ test_fetch_locally_failure __________________________
tests/test_documentation_fetcher.py:48: in test_fetch_locally_failure
    assert "Error: Unable to fetch documentation" in result
E   AssertionError: assert 'Error: Unable to fetch documentation' in 'Example Domain\n\n# Example Domain\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)'
----------------------------- Captured stdout call -----------------------------
✓ Successfully fetched documentation via Playwright for https://example.com/docs
_____________________ test_jina_failure_fallback_to_local ______________________
tests/test_documentation_fetcher.py:84: in test_jina_failure_fallback_to_local
    assert "# Local Title" in result
E   AssertionError: assert '# Local Title' in 'Example Domain\n\n# Example Domain\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)'
----------------------------- Captured stdout call -----------------------------
⚠ WARNING: Jina fetch failed for https://example.com/docs: Jina service 
unavailable. Falling back to high-fidelity local fetch.
✓ Successfully fetched documentation via Playwright for https://example.com/docs
=========================== short test summary info ============================
FAILED tests/test_documentation_fetcher.py::test_fetch_locally_success - AssertionError: assert '# Title' in 'Example Domain\n\n# Example Domain\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)'
FAILED tests/test_documentation_fetcher.py::test_fetch_locally_failure - AssertionError: assert 'Error: Unable to fetch documentation' in 'Example Domain\n\n# Example Domain\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)'
FAILED tests/test_documentation_fetcher.py::test_jina_failure_fallback_to_local - AssertionError: assert '# Local Title' in 'Example Domain\n\n# Example Domain\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)'
========================= 3 failed, 2 passed in 5.01s ==========================
